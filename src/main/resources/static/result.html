<!DOCTYPE html>
<html>
<head>
<title>Quiz Result</title>
<style>
body {
    font-family: Arial;
    background:#eef2ff;
}

.result-box {
    width: 500px;
    margin: 60px auto;
    background: white;
    padding: 20px;
    border-radius: 8px;
}

.user-info {
    font-size: 15px;
    margin-bottom: 10px;
}
</style>
</head>

<body>

<div class="result-box">
    <h2>Quiz Result</h2>

    <!-- USER DETAILS -->
    <div class="user-info" id="userInfo"></div>

    <div id="score"></div>
    <hr>
    <div id="summary"></div>
</div>

<script>
let questions = JSON.parse(sessionStorage.getItem("questions")) || [];
let answers = JSON.parse(sessionStorage.getItem("answers")) || [];

let name = sessionStorage.getItem("name");
let usn  = sessionStorage.getItem("usn");

document.getElementById("userInfo").innerHTML = `
    <b>Name:</b> ${name || "N/A"}<br>
    <b>USN:</b> ${usn || "N/A"}
`;

let score = 0;
let summary = "";

/* SUMMARY ALWAYS STARTS FROM QUESTION 1 */
for (let i = 0; i < questions.length; i++) {
    let q = questions[i];
    let userAns = answers[i];
    let correct = q.correctOption;

    if (userAns === correct) score++;

    summary += `
        <p>
            <b>Q${i+1}:</b> ${q.question}<br>
            Your Answer: ${userAns != null ? String.fromCharCode(65 + userAns) : "Not Answered"}<br>
            Correct Answer: ${String.fromCharCode(65 + correct)}
        </p>
    `;
}

document.getElementById("score").innerHTML =
    `<b>Score:</b> ${score} / ${questions.length}`;

document.getElementById("summary").innerHTML = summary;
</script>

</body>
</html>
